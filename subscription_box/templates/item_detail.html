{% extends 'base.html' %}

{% block meta %}
<title>Item Detail</title>
{% endblock meta %}

{% block content %}
<h1>Item Detail</h1>
<h2>{{ item.name }}</h2>
<p>{{ item.quantity }}</p>

<div id="edit" style="display: none;">
    <form method="POST" action="{% url 'subscription_box:item_edit' item.id %}">
        {% csrf_token %}
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="{{ item.name }}">
        <br>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" value="{{ item.quantity }}">
        <br>
        <input type="submit" value="Save">
    </form>
</div>
<button onclick=showEditForm()>Edit</button>
<a href="{% url 'subscription_box:item_delete' item.id %}">Delete</a>
{% endblock content %}

{% block scripts %}
<script>
    async function deleteItem(itemId) {
        const response = await fetch(`/subscription_box/item/delete/${itemId}/`, {
            method: 'DELETE',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        });

        if (response.ok) {
            window.location.reload();
        }
    }

    function showEditForm() {
        document.getElementById('edit').style.display = 'block';
    }

</script>
{% endblock scripts %}